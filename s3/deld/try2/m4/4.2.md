## 4.2 JK and D Flip-Flops

### 1. The JK Flip-Flop

The JK flip-flop is a significant improvement over the SR flip-flop. It resolves the "invalid state" issue of the SR flip-flop by adding a feedback path from the outputs to the inputs. The inputs `J` and `K` behave similarly to `S` and `R` for setting and resetting the flip-flop, respectively. However, the JK flip-flop introduces a new "toggle" functionality.

**Key Features:**
*   **Universal Flip-Flop:** It is considered a universal flip-flop because it can be configured to perform the functions of SR, D, and T flip-flops.
*   **No Invalid State:** It eliminates the S=1, R=1 forbidden state of the SR flip-flop.
*   **Toggle State:** When both J and K are high, the output toggles (inverts) on each clock pulse.

[Click here for a logic diagram of a JK Flip-Flop](https://www.google.com/search?tbm=isch&q=JK+flip+flop+logic+diagram+with+preset+clear)
**What to look for:** A circuit that resembles the SR flip-flop but with feedback. The `Q` output is ANDed with the `K` and `CLK` inputs, and the `Q'` output is ANDed with the `J` and `CLK` inputs.

#### 1.1 Operation and Truth Table

The behavior of a JK flip-flop is defined by its inputs `J` and `K`. The state transition occurs on the active edge of the clock signal (e.g., positive edge `↑`).

**Truth Table for a Positive-Edge Triggered JK Flip-Flop:**

| CLK | J | K | Present State (Qn) | Next State (Qn+1) | Action |
| :--: | :-: | :-: | :---: | :---: | :--- |
| ↑ | 0 | 0 | Qn | Qn | **No Change** (Memory) |
| ↑ | 0 | 1 | X | 0 | **Reset** |
| ↑ | 1 | 0 | X | 1 | **Set** |
| ↑ | 1 | 1 | Qn | Qn' | **Toggle** |

*(Where `↑` denotes a rising clock edge, `Qn'` is the complement of `Qn`, and `X` is "don't care")*

**Explanation of States:**
*   **J=0, K=0 (Hold/Memory):** Similar to the SR flip-flop, when both inputs are low, the flip-flop holds its current state upon a clock trigger.
*   **J=0, K=1 (Reset):** The `K` input resets the flip-flop, forcing the `Q` output to `0`.
*   **J=1, K=0 (Set):** The `J` input sets the flip-flop, forcing the `Q` output to `1`.
*   **J=1, K=1 (Toggle):** This is the key improvement. When both `J` and `K` are high, the output inverts its previous state on the clock trigger. If `Q` was `0`, it becomes `1`; if it was `1`, it becomes `0`. This is extremely useful for building counters.

#### 1.2 JK Flip-Flop Excitation Table

The excitation table shows the required `J` and `K` inputs to achieve a desired state transition from `Qn` to `Qn+1`.

| Present State (Qn) | Next State (Qn+1) | J | K |
| :---: | :---: | :-: | :-: |
| 0 | 0 | 0 | X |
| 0 | 1 | 1 | X |
| 1 | 0 | X | 1 |
| 1 | 1 | X | 0 |

*(Where `X` denotes "don't care")*

**Explanation:**
*   **0 → 0:** To keep the state at 0, we can either do nothing (J=0, K=0) or reset it (J=0, K=1). So, `J=0, K=X`.
*   **0 → 1:** To go from 0 to 1, we can either set it (J=1, K=0) or toggle it (J=1, K=1). So, `J=1, K=X`.
*   **1 → 0:** To go from 1 to 0, we can either reset it (J=0, K=1) or toggle it (J=1, K=1). So, `J=X, K=1`.
*   **1 → 1:** To keep the state at 1, we can either do nothing (J=0, K=0) or set it (J=1, K=0). So, `J=X, K=0`.

### 2. The D Flip-Flop (Data or Delay Flip-Flop)

The D flip-flop is another fundamental type, primarily used for storing data. It has a single data input, `D`. Its function is simple: whatever value is on the `D` input when the clock is triggered becomes the new value of the `Q` output.

**Key Features:**
*   **Data Storage:** It acts as a basic memory cell, capturing and holding the value from its `D` input.
*   **Delay Element:** It can be seen as a delay element, as the input `D` appears at the output `Q` only after one clock cycle. This is why it's also called a Delay flip-flop.
*   **Implementation:** A D flip-flop can be easily created from a JK flip-flop by connecting `J` to `D` and `K` to an inverted `D`. It can also be made from an SR flip-flop by connecting `S` to `D` and `R` to an inverted `D`.

[Click here for a logic diagram of a D Flip-Flop](https://www.google.com/search?tbm=isch&q=D+flip+flop+logic+diagram+from+JK)
**What to look for:** A JK flip-flop with the D input connected to J, and an inverter between the D input and the K input.

#### 2.1 Operation and Truth Table

The operation is straightforward: `Qn+1 = D`.

**Truth Table for a Positive-Edge Triggered D Flip-Flop:**

| CLK | D | Next State (Qn+1) | Action |
| :--: | :-: | :---: | :--- |
| ↑ | 0 | 0 | **Reset** (Stores 0) |
| ↑ | 1 | 1 | **Set** (Stores 1) |

#### 2.2 D Flip-Flop Excitation Table

The excitation table is the simplest of all flip-flops. To get a certain value at the output (`Qn+1`), you simply need to apply that same value to the `D` input before the clock edge.

| Present State (Qn) | Next State (Qn+1) | D |
| :---: | :---: | :-: |
| 0 | 0 | 0 |
| 0 | 1 | 1 |
| 1 | 0 | 0 |
| 1 | 1 | 1 |

### 3. Clock Triggering Methods

As seen in the handwritten notes, flip-flops can respond to the clock signal in different ways. This is a critical concept for timing analysis.

*   **Positive-Edge Triggering:** The flip-flop changes state only at the instant the clock signal transitions from LOW to HIGH (rising edge).
*   **Negative-Edge Triggering:** The flip-flop changes state only at the instant the clock signal transitions from HIGH to LOW (falling edge).
*   **Positive-Level Triggering (Latches):** The flip-flop is sensitive to inputs as long as the clock signal is HIGH. The output can change multiple times if the inputs change while the clock is high. These are technically called **latches**, not edge-triggered flip-flops.
*   **Negative-Level Triggering (Latches):** The flip-flop is sensitive to inputs as long as the clock signal is LOW.

[Click here for a timing diagram showing different clock triggering methods](https://www.google.com/search?tbm=isch&q=positive+negative+edge+level+triggering+timing+diagram)
**What to look for:** A clock waveform with arrows pointing to the rising edge, falling edge, high level, and low level, indicating when a state change would occur for each type of triggering. The notes include several hand-drawn examples of this.

---

### Questions

1.  What is the primary advantage of a JK flip-flop over an SR flip-flop?
2.  Explain the "toggle" condition in a JK flip-flop. What must the `J` and `K` inputs be for this to occur?
3.  Develop the full truth table and the excitation table for a JK flip-flop.
4.  What is the main application of a D flip-flop? Why is it sometimes called a "Delay" flip-flop?
5.  Show how you can construct a D flip-flop using a JK flip-flop and one inverter.
6.  Draw the truth table and excitation table for a D flip-flop.
7.  Using a timing diagram, illustrate the difference between positive-edge triggering and positive-level triggering. Why is edge-triggering generally preferred in synchronous systems?
